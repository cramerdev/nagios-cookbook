# Generated by Chef
# host definitions

<% @nodes.each do |n| -%>
define host {
  use server
  address <%= n['nagios']['client']['ipaddress'] %>
  host_name <%= n[:fqdn] %>
<% if (n.roles || []).empty? -%>
  hostgroups all
<% else -%>
  hostgroups <%= (n.roles.to_a << n.chef_environment).join(",") %>
<% end -%>
<% unless @contacts[n.name].empty? %>
  contacts <%= @contacts[n.name].join(',') %>
<% end %>
}
<% end -%>
